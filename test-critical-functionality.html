<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Test Critical Functionality - Confuc10 ++</title>\n    <style>\n        body {\n            font-family: 'JetBrains Mono', monospace;\n            margin: 0;\n            padding: 20px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n        }\n        .test-container {\n            max-width: 1400px;\n            margin: 0 auto;\n            background: rgba(255, 255, 255, 0.95);\n            padding: 30px;\n            border-radius: 16px;\n            box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n            backdrop-filter: blur(10px);\n        }\n        .header {\n            text-align: center;\n            margin-bottom: 40px;\n        }\n        .header h1 {\n            color: #6366f1;\n            font-size: 2.5rem;\n            margin: 0;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);\n        }\n        .header p {\n            color: #64748b;\n            font-size: 1.1rem;\n            margin: 10px 0 0 0;\n        }\n        .functionality-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n            gap: 30px;\n            margin-bottom: 40px;\n        }\n        .functionality-card {\n            background: white;\n            padding: 25px;\n            border-radius: 12px;\n            box-shadow: 0 8px 25px rgba(0,0,0,0.1);\n            border-left: 5px solid #6366f1;\n        }\n        .functionality-title {\n            color: #6366f1;\n            font-size: 1.4rem;\n            font-weight: bold;\n            margin-bottom: 15px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n        .functionality-description {\n            color: #475569;\n            margin-bottom: 20px;\n            line-height: 1.6;\n        }\n        .test-section {\n            margin-bottom: 20px;\n            padding: 15px;\n            background: #f8fafc;\n            border-radius: 8px;\n            border: 1px solid #e2e8f0;\n        }\n        .test-title {\n            font-weight: bold;\n            color: #1e293b;\n            margin-bottom: 10px;\n        }\n        .test-result {\n            padding: 10px;\n            border-radius: 6px;\n            margin: 8px 0;\n            font-size: 0.9rem;\n        }\n        .success {\n            background: #dcfce7;\n            color: #166534;\n            border: 1px solid #22c55e;\n        }\n        .error {\n            background: #fef2f2;\n            color: #991b1b;\n            border: 1px solid #ef4444;\n        }\n        .info {\n            background: #eff6ff;\n            color: #1e40af;\n            border: 1px solid #3b82f6;\n        }\n        .warning {\n            background: #fffbeb;\n            color: #92400e;\n            border: 1px solid #f59e0b;\n        }\n        .test-button {\n            background: linear-gradient(135deg, #6366f1, #8b5cf6);\n            color: white;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 8px;\n            cursor: pointer;\n            margin: 5px;\n            font-weight: 500;\n            transition: all 0.3s ease;\n        }\n        .test-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);\n        }\n        .app-preview {\n            background: white;\n            border-radius: 12px;\n            overflow: hidden;\n            box-shadow: 0 8px 25px rgba(0,0,0,0.1);\n            margin-top: 30px;\n        }\n        .app-preview iframe {\n            width: 100%;\n            height: 700px;\n            border: none;\n        }\n        .preview-controls {\n            padding: 20px;\n            background: #f8fafc;\n            border-top: 1px solid #e2e8f0;\n            display: flex;\n            gap: 10px;\n            flex-wrap: wrap;\n            justify-content: center;\n        }\n        .status-indicator {\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            margin-right: 8px;\n        }\n        .status-success { background: #22c55e; }\n        .status-error { background: #ef4444; }\n        .status-warning { background: #f59e0b; }\n        .status-info { background: #3b82f6; }\n        \n        .summary-card {\n            background: linear-gradient(135deg, #10b981, #059669);\n            color: white;\n            padding: 25px;\n            border-radius: 12px;\n            margin-top: 30px;\n            text-align: center;\n        }\n        .summary-title {\n            font-size: 1.5rem;\n            font-weight: bold;\n            margin-bottom: 15px;\n        }\n        .summary-stats {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n            gap: 20px;\n            margin-top: 20px;\n        }\n        .summary-stat {\n            text-align: center;\n        }\n        .summary-stat-value {\n            font-size: 2rem;\n            font-weight: bold;\n            margin-bottom: 5px;\n        }\n        .summary-stat-label {\n            font-size: 0.9rem;\n            opacity: 0.9;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"test-container\">\n        <div class=\"header\">\n            <h1>üîß Test Critical Functionality</h1>\n            <p>Verificaci√≥n completa de las funcionalidades cr√≠ticas implementadas</p>\n        </div>\n        \n        <div class=\"functionality-grid\">\n            <div class=\"functionality-card\">\n                <div class=\"functionality-title\">\n                    üåê Sistema de Idiomas\n                </div>\n                <div class=\"functionality-description\">\n                    Sistema completo de traducciones entre espa√±ol e ingl√©s con persistencia en localStorage y actualizaci√≥n din√°mica de toda la interfaz.\n                </div>\n                <div class=\"test-section\">\n                    <div class=\"test-title\">Pruebas del Sistema de Idiomas</div>\n                    <div id=\"language-tests\">Ejecutando pruebas...</div>\n                    <button class=\"test-button\" onclick=\"testLanguageSystem()\">üß™ Probar Sistema</button>\n                </div>\n            </div>\n            \n            <div class=\"functionality-card\">\n                <div class=\"functionality-title\">\n                    üåô Toggle Light/Dark Theme\n                </div>\n                <div class=\"functionality-description\">\n                    Sistema de temas con transiciones suaves, persistencia de preferencias y cambio autom√°tico de logos e iconos.\n                </div>\n                <div class=\"test-section\">\n                    <div class=\"test-title\">Pruebas del Sistema de Temas</div>\n                    <div id=\"theme-tests\">Ejecutando pruebas...</div>\n                    <button class=\"test-button\" onclick=\"testThemeSystem()\">üß™ Probar Temas</button>\n                </div>\n            </div>\n            \n            <div class=\"functionality-card\">\n                <div class=\"functionality-title\">\n                    üé§ Selecci√≥n de Voz (Masculina/Femenina)\n                </div>\n                <div class=\"functionality-description\">\n                    Sistema de audio con detecci√≥n autom√°tica de voces chinas, selecci√≥n de g√©nero y feedback visual durante la reproducci√≥n.\n                </div>\n                <div class=\"test-section\">\n                    <div class=\"test-title\">Pruebas del Sistema de Audio</div>\n                    <div id=\"audio-tests\">Ejecutando pruebas...</div>\n                    <button class=\"test-button\" onclick=\"testAudioSystem()\">üß™ Probar Audio</button>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"app-preview\">\n            <iframe src=\"index.html\" id=\"app-iframe\"></iframe>\n            <div class=\"preview-controls\">\n                <button class=\"test-button\" onclick=\"reloadApp()\">üîÑ Recargar App</button>\n                <button class=\"test-button\" onclick=\"testLanguageInApp()\">üåê Probar Idiomas</button>\n                <button class=\"test-button\" onclick=\"testThemeInApp()\">üåô Probar Temas</button>\n                <button class=\"test-button\" onclick=\"testAudioInApp()\">üé§ Probar Audio</button>\n                <button class=\"test-button\" onclick=\"runAllTests()\">üöÄ Ejecutar Todas las Pruebas</button>\n            </div>\n        </div>\n        \n        <div class=\"summary-card\" id=\"summary-card\" style=\"display: none;\">\n            <div class=\"summary-title\">üìä Resumen de Resultados</div>\n            <div class=\"summary-stats\">\n                <div class=\"summary-stat\">\n                    <div class=\"summary-stat-value\" id=\"total-tests\">0</div>\n                    <div class=\"summary-stat-label\">Pruebas Totales</div>\n                </div>\n                <div class=\"summary-stat\">\n                    <div class=\"summary-stat-value\" id=\"passed-tests\">0</div>\n                    <div class=\"summary-stat-label\">Pruebas Exitosas</div>\n                </div>\n                <div class=\"summary-stat\">\n                    <div class=\"summary-stat-value\" id=\"success-rate\">0%</div>\n                    <div class=\"summary-stat-label\">Tasa de √âxito</div>\n                </div>\n                <div class=\"summary-stat\">\n                    <div class=\"summary-stat-value\" id=\"overall-status\">‚úÖ</div>\n                    <div class=\"summary-stat-label\">Estado General</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        let testResults = {\n            language: { total: 0, passed: 0 },\n            theme: { total: 0, passed: 0 },\n            audio: { total: 0, passed: 0 }\n        };\n        \n        // Test Language System\n        async function testLanguageSystem() {\n            const testDiv = document.getElementById('language-tests');\n            testDiv.innerHTML = '<div class=\"info\">üîç Probando sistema de idiomas...</div>';\n            \n            try {\n                const response = await fetch('app.js');\n                const js = await response.text();\n                \n                const tests = [\n                    { name: 'Funci√≥n changeLanguage', test: js.includes('changeLanguage(lang)') },\n                    { name: 'Funci√≥n updateLanguageDisplay', test: js.includes('updateLanguageDisplay()') },\n                    { name: 'Funci√≥n getTranslation', test: js.includes('getTranslation(key)') },\n                    { name: 'Traducciones en espa√±ol', test: js.includes('Plataforma Avanzada de Aprendizaje de Chino') },\n                    { name: 'Traducciones en ingl√©s', test: js.includes('Advanced Chinese Learning Platform') },\n                    { name: 'Persistencia de idioma', test: js.includes('hsk-language') },\n                    { name: 'Soporte data-i18n', test: js.includes('data-i18n') },\n                    { name: 'Actualizaci√≥n de vocabulario', test: js.includes('getMeaningForLanguage') },\n                    { name: 'Event listener configurado', test: js.includes('language-select') },\n                    { name: 'Notificaciones de cambio', test: js.includes('Idioma cambiado') }\n                ];\n                \n                testResults.language.total = tests.length;\n                testResults.language.passed = 0;\n                \n                let results = '<div class=\"success\">üåê Resultados del Sistema de Idiomas:</div>';\n                \n                tests.forEach(test => {\n                    const status = test.test ? '‚úÖ' : '‚ùå';\n                    const className = test.test ? 'success' : 'error';\n                    results += `<div class=\"${className}\"><span class=\"status-indicator status-${test.test ? 'success' : 'error'}\"></span>${status} ${test.name}</div>`;\n                    if (test.test) testResults.language.passed++;\n                });\n                \n                const percentage = Math.round((testResults.language.passed / testResults.language.total) * 100);\n                results += `<div class=\"info\">üìä Puntuaci√≥n: ${testResults.language.passed}/${testResults.language.total} (${percentage}%)</div>`;\n                \n                if (percentage >= 90) {\n                    results += '<div class=\"success\">üéâ Sistema de idiomas funcionando perfectamente!</div>';\n                } else if (percentage >= 70) {\n                    results += '<div class=\"warning\">‚ö†Ô∏è Sistema de idiomas funcionando con algunos problemas menores.</div>';\n                } else {\n                    results += '<div class=\"error\">‚ùå Sistema de idiomas requiere correcciones.</div>';\n                }\n                \n                testDiv.innerHTML = results;\n                updateSummary();\n                \n            } catch (error) {\n                testDiv.innerHTML = '<div class=\"error\">‚ùå Error probando sistema de idiomas: ' + error.message + '</div>';\n            }\n        }\n        \n        // Test Theme System\n        async function testThemeSystem() {\n            const testDiv = document.getElementById('theme-tests');\n            testDiv.innerHTML = '<div class=\"info\">üîç Probando sistema de temas...</div>';\n            \n            try {\n                const jsResponse = await fetch('app.js');\n                const js = await jsResponse.text();\n                const cssResponse = await fetch('styles-planetscale.css');\n                const css = await cssResponse.text();\n                \n                const tests = [\n                    { name: 'Funci√≥n toggleTheme', test: js.includes('toggleTheme()') },\n                    { name: 'Funci√≥n applyTheme', test: js.includes('applyTheme()') },\n                    { name: 'Funci√≥n updateThemeButton', test: js.includes('updateThemeButton()') },\n                    { name: 'Persistencia de tema', test: js.includes('hsk-theme') },\n                    { name: 'Estilos tema claro', test: css.includes('[data-theme=\"light\"]') },\n                    { name: 'Tema oscuro por defecto', test: js.includes('Default to dark theme') },\n                    { name: 'Notificaciones de tema', test: js.includes('darkModeActivated') },\n                    { name: 'Transiciones CSS', test: css.includes('transition: background-color') },\n                    { name: 'Cambio de logo', test: js.includes('logo_appDM.png') },\n                    { name: 'Variables CSS din√°micas', test: js.includes('setProperty') }\n                ];\n                \n                testResults.theme.total = tests.length;\n                testResults.theme.passed = 0;\n                \n                let results = '<div class=\"success\">üåô Resultados del Sistema de Temas:</div>';\n                \n                tests.forEach(test => {\n                    const status = test.test ? '‚úÖ' : '‚ùå';\n                    const className = test.test ? 'success' : 'error';\n                    results += `<div class=\"${className}\"><span class=\"status-indicator status-${test.test ? 'success' : 'error'}\"></span>${status} ${test.name}</div>`;\n                    if (test.test) testResults.theme.passed++;\n                });\n                \n                const percentage = Math.round((testResults.theme.passed / testResults.theme.total) * 100);\n                results += `<div class=\"info\">üìä Puntuaci√≥n: ${testResults.theme.passed}/${testResults.theme.total} (${percentage}%)</div>`;\n                \n                if (percentage >= 90) {\n                    results += '<div class=\"success\">üéâ Sistema de temas funcionando perfectamente!</div>';\n                } else if (percentage >= 70) {\n                    results += '<div class=\"warning\">‚ö†Ô∏è Sistema de temas funcionando con algunos problemas menores.</div>';\n                } else {\n                    results += '<div class=\"error\">‚ùå Sistema de temas requiere correcciones.</div>';\n                }\n                \n                testDiv.innerHTML = results;\n                updateSummary();\n                \n            } catch (error) {\n                testDiv.innerHTML = '<div class=\"error\">‚ùå Error probando sistema de temas: ' + error.message + '</div>';\n            }\n        }\n        \n        // Test Audio System\n        async function testAudioSystem() {\n            const testDiv = document.getElementById('audio-tests');\n            testDiv.innerHTML = '<div class=\"info\">üîç Probando sistema de audio...</div>';\n            \n            try {\n                const response = await fetch('app.js');\n                const js = await response.text();\n                const htmlResponse = await fetch('index.html');\n                const html = await htmlResponse.text();\n                \n                const tests = [\n                    { name: 'Funci√≥n playAudio mejorada', test: js.includes('getPreferredVoice') },\n                    { name: 'Funci√≥n initializeVoices', test: js.includes('initializeVoices()') },\n                    { name: 'Funci√≥n setVoicePreference', test: js.includes('setVoicePreference(voiceType)') },\n                    { name: 'Detecci√≥n de voces chinas', test: js.includes('chineseVoices') },\n                    { name: 'Categorizaci√≥n por g√©nero', test: js.includes('male:') && js.includes('female:') },\n                    { name: 'Persistencia de voz', test: js.includes('hsk-voice-preference') },\n                    { name: 'Feedback visual de audio', test: js.includes('showAudioFeedback') },\n                    { name: 'Selector de voz en HTML', test: html.includes('voice-select') },\n                    { name: 'Opciones de voz (male/female)', test: html.includes('üë® Male') && html.includes('üë© Female') },\n                    { name: 'Event listener de voz', test: js.includes('voice-select') && js.includes('addEventListener') }\n                ];\n                \n                testResults.audio.total = tests.length;\n                testResults.audio.passed = 0;\n                \n                let results = '<div class=\"success\">üé§ Resultados del Sistema de Audio:</div>';\n                \n                tests.forEach(test => {\n                    const status = test.test ? '‚úÖ' : '‚ùå';\n                    const className = test.test ? 'success' : 'error';\n                    results += `<div class=\"${className}\"><span class=\"status-indicator status-${test.test ? 'success' : 'error'}\"></span>${status} ${test.name}</div>`;\n                    if (test.test) testResults.audio.passed++;\n                });\n                \n                const percentage = Math.round((testResults.audio.passed / testResults.audio.total) * 100);\n                results += `<div class=\"info\">üìä Puntuaci√≥n: ${testResults.audio.passed}/${testResults.audio.total} (${percentage}%)</div>`;\n                \n                if (percentage >= 90) {\n                    results += '<div class=\"success\">üéâ Sistema de audio funcionando perfectamente!</div>';\n                } else if (percentage >= 70) {\n                    results += '<div class=\"warning\">‚ö†Ô∏è Sistema de audio funcionando con algunos problemas menores.</div>';\n                } else {\n                    results += '<div class=\"error\">‚ùå Sistema de audio requiere correcciones.</div>';\n                }\n                \n                testDiv.innerHTML = results;\n                updateSummary();\n                \n            } catch (error) {\n                testDiv.innerHTML = '<div class=\"error\">‚ùå Error probando sistema de audio: ' + error.message + '</div>';\n            }\n        }\n        \n        // Update Summary\n        function updateSummary() {\n            const totalTests = testResults.language.total + testResults.theme.total + testResults.audio.total;\n            const passedTests = testResults.language.passed + testResults.theme.passed + testResults.audio.passed;\n            \n            if (totalTests > 0) {\n                const successRate = Math.round((passedTests / totalTests) * 100);\n                \n                document.getElementById('total-tests').textContent = totalTests;\n                document.getElementById('passed-tests').textContent = passedTests;\n                document.getElementById('success-rate').textContent = successRate + '%';\n                \n                let status = '‚úÖ';\n                if (successRate < 70) status = '‚ùå';\n                else if (successRate < 90) status = '‚ö†Ô∏è';\n                \n                document.getElementById('overall-status').textContent = status;\n                document.getElementById('summary-card').style.display = 'block';\n            }\n        }\n        \n        // App interaction functions\n        function reloadApp() {\n            const iframe = document.getElementById('app-iframe');\n            iframe.src = iframe.src;\n        }\n        \n        function testLanguageInApp() {\n            const iframe = document.getElementById('app-iframe');\n            iframe.contentWindow.postMessage({action: 'testLanguage'}, '*');\n        }\n        \n        function testThemeInApp() {\n            const iframe = document.getElementById('app-iframe');\n            iframe.contentWindow.postMessage({action: 'testTheme'}, '*');\n        }\n        \n        function testAudioInApp() {\n            const iframe = document.getElementById('app-iframe');\n            iframe.contentWindow.postMessage({action: 'testAudio'}, '*');\n        }\n        \n        function runAllTests() {\n            testLanguageSystem();\n            setTimeout(() => testThemeSystem(), 1000);\n            setTimeout(() => testAudioSystem(), 2000);\n        }\n        \n        // Auto-run tests on page load\n        window.addEventListener('load', () => {\n            setTimeout(() => {\n                runAllTests();\n            }, 1000);\n        });\n    </script>\n</body>\n</html>"