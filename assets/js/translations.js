// HSK Chinese Learning App - Translations
const translations = {
    es: {
        // Header
        appTitle: "Confuc10 ++",
        appSubtitle: "Aprende caracteres chinos, pinyin y traducciones",
        languageSelectorTitle: "Idioma",
        languageSelectorTooltip: "Cambiar idioma de la interfaz",
        voiceSelectorTitle: "Voz",
        voiceSelectorTooltip: "Seleccionar voz para pronunciación",
        themeToggleTitle: "Cambiar tema",
        audioToggleTitle: "Activar/Desactivar audio",
        switchToLightMode: "Cambiar a modo claro",
        switchToDarkMode: "Cambiar a modo oscuro",
        darkModeActivated: "Modo oscuro activado",
        lightModeActivated: "Modo claro activado",

        // Navigation
        homeTab: "Inicio",
        practiceTab: "Práctica",
        browseTab: "Explorar",
        quizTab: "Quiz",
        matrixTab: "Matrix",
        statsTab: "Estadísticas",

        // Practice Mode
        levelLabel: "Nivel HSK:",
        allLevels: "Todos los niveles",
        practiceMode: "Modo de práctica:",
        charToPinyin: "Carácter → Pinyin",
        charToEnglish: "Carácter → Inglés",
        pinyinToChar: "Pinyin → Carácter",
        englishToChar: "Inglés → Carácter",

        // Flashcard Controls
        showAnswer: "Mostrar respuesta",
        next: "Siguiente",
        iKnow: "✓ Lo sé",
        iDontKnow: "✗ No lo sé",
        clickToStart: "Haz clic en \"Siguiente\" para comenzar",
        usageExample: "Ejemplo de uso:",
        wordTypeLabel: "Tipo",
        tonesLabel: "Tonos",
        wordTypeVerb: "Verbo",
        wordTypeAdjective: "Adjetivo",
        wordTypeNoun: "Sustantivo",
        wordTypeNumber: "Número",
        wordTypeCharacter: "Carácter",
        wordTypeWord: "Palabra",
        practiceWithWord: "Practica con esta palabra",
        createSentenceUsing: "Intenta crear una oración usando \"{character}\"",

        // Browse Section
        searchPlaceholder: "Buscar por carácter, pinyin o traducción...",
        selectLevel: "Selecciona nivel...",
        typePinyin: "Escribe Pinyin...",
        wordsFound: "Encontradas {count} palabras",
        playPronunciation: "Reproducir pronunciación",
        loadingMoreVocabulary: "Cargando más vocabulario...",
        allVocabularyLoaded: "[✓] ¡Todo el vocabulario cargado!",
        noVocabularyFound: "No se encontró vocabulario",
        tryAdjustingSearch: "Prueba ajustando tu búsqueda o filtro",
        noVocabularyForLevel: "No hay vocabulario disponible para HSK nivel {level}",

        // Home
        homeWelcomeTitle: "¡Bienvenido a Confuc10 ++!",
        homeWelcomeSubtitle: "La plataforma avanzada para dominar el chino mandarín",
        homeStatCharacters: "Caracteres",
        homeStatHskLevels: "Niveles HSK",
        homeStatPracticeModes: "Modos de Práctica",
        homeCardPracticeTitle: "Práctica",
        homeCardPracticeDesc: "Flashcards y práctica guiada",
        homeCardBrowseTitle: "Explorar",
        homeCardBrowseDesc: "Explora vocabulario por nivel",
        homeCardQuizTitle: "Quiz",
        homeCardQuizDesc: "Pon a prueba tus conocimientos",
        homeCardMatrixTitle: "Matrix",
        homeCardMatrixDesc: "Encuentra caracteres en tiempo récord",
        homeCardStatsTitle: "Estadísticas",
        homeCardStatsDesc: "Mira tu progreso y rachas",
        onboardingHomeHint: "¡Bienvenido! Empieza en Práctica y luego prueba Quiz o Matrix para generar progreso.",
        onboardingModuleHint: "Tip: en {module}, completa una acción rápida para registrar progreso.",

        // Quiz Section
        configureQuiz: "Configurar Quiz",
        numberOfQuestions: "Número de preguntas:",
        startQuiz: "Comenzar",
        question: "Pregunta",
        quizQuestionCounter: "Pregunta",
        quizHskLevel: "Nivel HSK",
        of: "de",
        submit: "Enviar",
        submitAnswer: "Enviar",
        selectAnAnswer: "Selecciona una respuesta",
        whatDoesThisCharacterMean: "¿Qué significa este carácter?",
        correctAnswerLabel: "Respuesta correcta",
        incorrect: "Incorrecta",
        correctQuizFeedback: "¡Correcto!",
        incorrectQuizFeedback: "Incorrecta",
        score: "Puntuación:",
        confirm: "Confirmar",
        quizCompleted: "¡Quiz Completado!",
        quizComplete: "¡Quiz Completado!",
        finalScore: "Puntuación final:",
        percentage: "Porcentaje:",
        retakeQuiz: "Reintentar",
        newQuiz: "Nuevo Quiz",
        resumeQuiz: "Reanudar Quiz",
        quizSessionResumed: "Sesión de quiz reanudada",

        // Statistics
        learningStats: "Estadísticas de Aprendizaje",
        learningStatistics: "Estadísticas de Aprendizaje",
        wordsStudied: "Palabras estudiadas",
        accuracy: "Precisión",
        accuracyRate: "Precisión",
        quizzesCompleted: "Quizzes completados",
        currentStreak: "Racha actual",
        progressByLevel: "Progreso por nivel HSK",
        resetStats: "Resetear estadísticas",
        resetConfirm: "¿Estás seguro de que quieres resetear todas las estadísticas?",
        noStatsYet: "Aún no hay progreso para mostrar",
        startWithPracticeToSeeStats: "Comienza en Práctica para ver tus estadísticas aquí",
        goToPractice: "Ir a Práctica",

        // Vocabulary Info
        character: "Carácter:",
        pinyin: "Pinyin:",
        translation: "Traducción:",
        level: "Nivel HSK:",

        // Audio
        enableAudio: "Activar audio",
        disableAudio: "Desactivar audio",
        clickToPronounce: "Hacer clic para escuchar pronunciación",

        // Footer
        developedBy: "Desarrollado con ♡ por",
        version: "v3.0.1 | Plataforma Avanzada de Aprendizaje de Chino",
        githubLink: "[>] GitHub",
        confuciusInspired: "[中] Instituto Confucio inspired",
        footer: "Hecho con ♡ para estudiantes de chino",

        // Messages
        noWordsAvailable: "No hay más palabras disponibles",
        onlyWordsAvailable: "Solo hay {count} palabras disponibles para este nivel.",
        loadingError: "Error al cargar los datos de vocabulario. Revisa la consola para más detalles.",
        spanishLevelSoonTitle: "Nivel HSK {level} - Próximamente",
        spanishLevelSoonBody: "Próximamente se agregarán los niveles restantes en castellano. Puedes usar los 6 niveles completos en inglés desde ahora.",
        switchToEnglishBtn: "Cambiar a Inglés",
        backToHsk1Btn: "Ir a HSK 1",

        // Language
        language: "Idioma:",
        spanish: "Español",
        english: "English",

        // Header stats
        totalStudied: "Estudiado",
        progress: "Progreso",
        todayProgress: "Progreso de hoy",

        // Placeholder texts
        headerSearchPlaceholder: "Buscar caracteres, pinyin o significado...",

        // SRS Mode
        simpleMode: "Modo Simple",
        srsMode: "Modo SRS",
        switchToSimpleMode: "Cambiar a modo simple",
        switchToSRSMode: "Cambiar a modo SRS avanzado",
        srsAdvanced: "SRS Avanzado",
        simple: "Simple",
        modeActivated: "Modo {mode} activado",
        languageUpdated: "Idioma actualizado",
        languageUpdateFailed: "No se pudo actualizar el idioma",
        statsResetDone: "Estadísticas reiniciadas",
        statsResetFailed: "No se pudieron reiniciar las estadísticas",
        answerCorrectToast: "¡Respuesta correcta!",
        answerIncorrectToast: "Respuesta incorrecta",
        pinyinCorrectFeedback: "¡Correcto!",
        pinyinIncorrectFeedback: "Incorrecto. La respuesta es {answer}",
        audioEnabledMsg: "Audio activado",
        audioDisabledMsg: "Audio desactivado",
        progressSyncFailedLocal: "Falló la sincronización: progreso guardado localmente",

        // Matrix
        matrixTitle: "Juego de Matriz HSK",
        matrixSubtitle: "Encuentra el carácter chino que corresponde al pinyin mostrado",
        matrixDifficulty: "Dificultad",
        matrixEasy: "Fácil",
        matrixNormal: "Normal",
        matrixHard: "Difícil",
        matrixHighScores: "Mejores Puntuaciones",
        matrixLevel: "Nivel",
        matrixScore: "Puntuación",
        matrixStreak: "Racha",
        matrixPause: "Pausar",
        matrixQuit: "Salir",
        matrixFindCharacterFor: "Encuentra el carácter para:",
        matrixGameOver: "¡Juego Terminado!",
        matrixFinalScore: "Puntuación Final",
        matrixCorrectAnswers: "Respuestas Correctas",
        matrixWrongAnswers: "Respuestas Incorrectas",
        matrixBestStreak: "Mejor Racha",
        matrixAvgTime: "Tiempo Promedio",
        matrixNewRecord: "¡Nuevo Récord Personal!",
        matrixChangeSettings: "Cambiar Configuración",
        matrixBackHome: "Volver al Inicio",
        resumeMatrix: "Reanudar Matrix",

        // Installation
        installApp: "Instalar App",
        installAppDescription: "Instalar HSK Learning en tu dispositivo",

        // SRS Buttons
        srsAgain: "Repetir",
        srsHard: "Difícil",
        srsGood: "Bien",
        srsEasy: "Fácil",
        srsAgainTooltip: "Muy difícil - Repetir mañana",
        srsHardTooltip: "Difícil - Revisión en pocos días",
        srsGoodTooltip: "Bien - Revisión normal",
        srsEasyTooltip: "Fácil - Revisar en más tiempo",
        toggleSRS: "Cambiar modo SRS",

        // Authentication
        signInWithGitHub: 'Iniciar sesión con GitHub',
        signInSyncTitle: 'Iniciar sesión con GitHub para sincronizar tu progreso',
        signOut: 'Cerrar sesión',
        authDescription: 'Inicia sesión para guardar tu progreso y sincronizar en todos tus dispositivos',
        welcome: 'Bienvenido',
        guestMode: 'Modo invitado',
        cloudSync: 'Sincronización en la nube activada',

        // Leaderboard
        leaderboard: "Ranking",
        leaderboardSubtitle: "Compite con otros estudiantes de chino",
        leaderboardSetupSoon: "El ranking se está configurando. Mientras tanto, empieza en Práctica para generar progreso.",
        rankingType: "Tipo de ranking:",
        timePeriod: "Período:",
        hskLevelFilter: "Filtrar por nivel HSK:",
        allTime: "Todo el tiempo",
        thisWeek: "Esta semana",
        thisMonth: "Este mes",
        bestStreak: "Mejor racha",
        studyStreak: "Racha de estudio",
        timeSpent: "Tiempo dedicado",
        achievements: "Logros",
        yourRank: "Tu posición",
        totalUsers: "usuarios totales",
        weeklyActiveUsers: "Activos semanales",
        monthlyActiveUsers: "Activos mensuales",
        avgWordsPerUser: "Promedio palabras/usuario",
        maxStreak: "Racha máxima",
        totalWordsStudied: "Total palabras estudiadas",
        noRankingData: "No hay datos de ranking disponibles",
        startStudyingToAppear: "¡Comienza a estudiar para aparecer en la tabla!",
        startStudyingToRank: "¡Comienza a estudiar para obtener una clasificación!",
        startWithPracticeToJoinRanking: "Empieza en Práctica para aparecer en el ranking",
        you: "Tú",
        activeDays: "Días activos",
        correct: "Correctas",
        tryAgain: "Reintentar",
        refresh: "Actualizar",

        // User Profile
        online: "En línea",
        offline: "Desconectado",
        synced: "Sincronizado",
        localOnly: "Solo local",
        logout: "Cerrar sesión",
        guestMode: "Modo invitado",
        signIn: "Iniciar sesión",
        welcomeBack: "¡Bienvenido de vuelta",
        loggedOut: "Sesión cerrada exitosamente",
        progressSynced: "Progreso sincronizado en la nube",
        progressLocal: "Sin conexión - progreso guardado localmente"
    },

    en: {
        // Header
        appTitle: "Confuc10 ++",
        appSubtitle: "Learn Chinese characters, pinyin and translations",
        languageSelectorTitle: "Language",
        languageSelectorTooltip: "Change interface language",
        voiceSelectorTitle: "Voice",
        voiceSelectorTooltip: "Select voice for pronunciation",
        themeToggleTitle: "Toggle theme",
        audioToggleTitle: "Enable/Disable audio",
        switchToLightMode: "Switch to light mode",
        switchToDarkMode: "Switch to dark mode",
        darkModeActivated: "Dark mode activated",
        lightModeActivated: "Light mode activated",

        // Navigation
        homeTab: "Home",
        practiceTab: "Practice",
        browseTab: "Browse",
        quizTab: "Quiz",
        matrixTab: "Matrix",
        statsTab: "Statistics",

        // Practice Mode
        levelLabel: "HSK Level:",
        allLevels: "All levels",
        practiceMode: "Practice mode:",
        'char-to-pinyin': "Character → Pinyin",
        'char-to-english': "Character → English",
        'char-to-spanish': "Character → Spanish",
        'pinyin-to-char': "Pinyin → Character",
        'english-to-char': "English → Character",
        'spanish-to-char': "Spanish → Character",

        // Flashcard Controls
        showAnswer: "Show answer",
        next: "Next",
        iKnow: "✓ I know",
        iDontKnow: "✗ I don't know",
        clickToStart: "Click \"Next\" to begin",
        usageExample: "Usage example:",
        wordTypeLabel: "Type",
        tonesLabel: "Tones",
        wordTypeVerb: "Verb",
        wordTypeAdjective: "Adjective",
        wordTypeNoun: "Noun",
        wordTypeNumber: "Number",
        wordTypeCharacter: "Character",
        wordTypeWord: "Word",
        practiceWithWord: "Practice with this word",
        createSentenceUsing: "Try creating a sentence using \"{character}\"",

        // Browse Section
        searchPlaceholder: "Search by character, pinyin or translation...",
        selectLevel: "Select level...",
        typePinyin: "Type Pinyin...",
        wordsFound: "Found {count} words",
        playPronunciation: "Play pronunciation",
        loadingMoreVocabulary: "Loading more vocabulary...",
        allVocabularyLoaded: "[✓] All vocabulary loaded!",
        noVocabularyFound: "No vocabulary found",
        tryAdjustingSearch: "Try adjusting your search or filter",
        noVocabularyForLevel: "No vocabulary available for HSK level {level}",

        // Home
        homeWelcomeTitle: "Welcome to Confuc10 ++!",
        homeWelcomeSubtitle: "The advanced platform to master Mandarin Chinese",
        homeStatCharacters: "Characters",
        homeStatHskLevels: "HSK Levels",
        homeStatPracticeModes: "Practice Modes",
        homeCardPracticeTitle: "Practice",
        homeCardPracticeDesc: "Flashcards and guided practice",
        homeCardBrowseTitle: "Browse",
        homeCardBrowseDesc: "Explore vocabulary by level",
        homeCardQuizTitle: "Quiz",
        homeCardQuizDesc: "Test your knowledge",
        homeCardMatrixTitle: "Matrix",
        homeCardMatrixDesc: "Find characters against the clock",
        homeCardStatsTitle: "Statistics",
        homeCardStatsDesc: "Track your progress and streaks",
        onboardingHomeHint: "Welcome! Start in Practice and then try Quiz or Matrix to build progress.",
        onboardingModuleHint: "Tip: in {module}, complete a quick action to record progress.",

        // Quiz Section
        configureQuiz: "Configure Quiz",
        numberOfQuestions: "Number of questions:",
        startQuiz: "Start",
        question: "Question",
        quizQuestionCounter: "Question",
        quizHskLevel: "HSK Level",
        of: "of",
        submit: "Submit",
        submitAnswer: "Submit",
        selectAnAnswer: "Select an answer",
        whatDoesThisCharacterMean: "What does this character mean?",
        correctAnswerLabel: "Correct answer",
        incorrect: "Incorrect",
        correctQuizFeedback: "Correct!",
        incorrectQuizFeedback: "Incorrect",
        score: "Score:",
        confirm: "Confirm",
        quizCompleted: "Quiz Completed!",
        quizComplete: "Quiz Completed!",
        finalScore: "Final score:",
        percentage: "Percentage:",
        retakeQuiz: "Retry",
        newQuiz: "New Quiz",
        resumeQuiz: "Resume Quiz",
        quizSessionResumed: "Quiz session resumed",

        // Statistics
        learningStats: "Learning Statistics",
        learningStatistics: "Learning Statistics",
        wordsStudied: "Words studied",
        accuracy: "Accuracy",
        accuracyRate: "Accuracy",
        quizzesCompleted: "Quizzes completed",
        currentStreak: "Current streak",
        progressByLevel: "Progress by HSK level",
        resetStats: "Reset statistics",
        resetConfirm: "Are you sure you want to reset all statistics?",
        noStatsYet: "No progress to show yet",
        startWithPracticeToSeeStats: "Start with Practice to see your stats here",
        goToPractice: "Go to Practice",

        // Vocabulary Info
        character: "Character:",
        pinyin: "Pinyin:",
        translation: "Translation:",
        level: "HSK Level:",

        // Audio
        enableAudio: "Enable audio",
        disableAudio: "Disable audio",
        clickToPronounce: "Click to hear pronunciation",

        // Footer
        developedBy: "Developed with ♡ by",
        version: "v3.0.1 | Advanced Chinese Learning Platform",
        githubLink: "[>] GitHub",
        confuciusInspired: "[中] Confucius Institute inspired",
        footer: "Made with ♡ for Chinese learners",

        // Messages
        noWordsAvailable: "No more words available",
        onlyWordsAvailable: "Only {count} words available for this level.",
        loadingError: "Error loading vocabulary data. Please check the console for details.",
        spanishLevelSoonTitle: "HSK Level {level} - Coming Soon",
        spanishLevelSoonBody: "Remaining Spanish levels will be added soon. You can use all 6 levels in English right now.",
        switchToEnglishBtn: "Switch to English",
        backToHsk1Btn: "Go to HSK 1",

        // Language
        language: "Language:",
        spanish: "Español",
        english: "English",

        // Header stats
        totalStudied: "Studied",
        progress: "Progress",
        todayProgress: "Today's Progress",

        // Placeholder texts
        headerSearchPlaceholder: "Search characters, pinyin, or meaning...",

        // SRS Mode
        simpleMode: "Simple Mode",
        srsMode: "SRS Mode",
        switchToSimpleMode: "Switch to simple mode",
        switchToSRSMode: "Switch to advanced SRS mode",
        srsAdvanced: "Advanced SRS",
        simple: "Simple",
        modeActivated: "{mode} mode activated",
        languageUpdated: "Language updated",
        languageUpdateFailed: "Could not update language",
        statsResetDone: "Statistics reset",
        statsResetFailed: "Could not reset statistics",
        answerCorrectToast: "Correct answer!",
        answerIncorrectToast: "Incorrect answer",
        pinyinCorrectFeedback: "Correct!",
        pinyinIncorrectFeedback: "Incorrect. The answer is {answer}",
        audioEnabledMsg: "Audio enabled",
        audioDisabledMsg: "Audio disabled",
        progressSyncFailedLocal: "Sync failed: progress saved locally",

        // Matrix
        matrixTitle: "HSK Matrix Game",
        matrixSubtitle: "Find the Chinese character that matches the shown pinyin",
        matrixDifficulty: "Difficulty",
        matrixEasy: "Easy",
        matrixNormal: "Normal",
        matrixHard: "Hard",
        matrixHighScores: "Top Scores",
        matrixLevel: "Level",
        matrixScore: "Score",
        matrixStreak: "Streak",
        matrixPause: "Pause",
        matrixQuit: "Quit",
        matrixFindCharacterFor: "Find the character for:",
        matrixGameOver: "Game Over!",
        matrixFinalScore: "Final Score",
        matrixCorrectAnswers: "Correct Answers",
        matrixWrongAnswers: "Wrong Answers",
        matrixBestStreak: "Best Streak",
        matrixAvgTime: "Average Time",
        matrixNewRecord: "New Personal Record!",
        matrixChangeSettings: "Change Settings",
        matrixBackHome: "Back to Home",
        resumeMatrix: "Resume Matrix",

        // Installation
        installApp: "Install App",
        installAppDescription: "Install HSK Learning on your device",

        // SRS Buttons
        srsAgain: "Again",
        srsHard: "Hard",
        srsGood: "Good",
        srsEasy: "Easy",
        srsAgainTooltip: "Very difficult - Repeat tomorrow",
        srsHardTooltip: "Difficult - Review in a few days",
        srsGoodTooltip: "Good - Normal review",
        srsEasyTooltip: "Easy - Review in more time",
        toggleSRS: "Toggle SRS Mode",

        // Authentication
        signInWithGitHub: 'Sign in with GitHub',
        signInSyncTitle: 'Sign in with GitHub to sync your progress',
        signOut: 'Sign out',
        authDescription: 'Sign in to save your progress and sync across devices',
        welcome: 'Welcome',
        guestMode: 'Guest mode',
        cloudSync: 'Cloud sync enabled',

        // Leaderboard
        leaderboard: "Leaderboard",
        leaderboardSubtitle: "Compete with other Chinese learners",
        leaderboardSetupSoon: "Leaderboard is being set up. In the meantime, start with Practice to build progress.",
        rankingType: "Ranking type:",
        timePeriod: "Time period:",
        hskLevelFilter: "Filter by HSK level:",
        allTime: "All time",
        thisWeek: "This week",
        thisMonth: "This month",
        totalStudied: "Total studied",
        bestStreak: "Best streak",
        studyStreak: "Study streak",
        timeSpent: "Time spent",
        achievements: "Achievements",
        yourRank: "Your rank",
        totalUsers: "total users",
        weeklyActiveUsers: "Weekly active",
        monthlyActiveUsers: "Monthly active",
        avgWordsPerUser: "Avg words/user",
        maxStreak: "Max streak",
        totalWordsStudied: "Total words studied",
        noRankingData: "No ranking data available",
        startStudyingToAppear: "Start studying to appear on the leaderboard!",
        startStudyingToRank: "Start studying to get ranked!",
        startWithPracticeToJoinRanking: "Start with Practice to appear on the leaderboard",
        you: "You",
        activeDays: "Active days",
        correct: "Correct",
        tryAgain: "Retry",
        refresh: "Refresh",

        // User Profile
        online: "Online",
        offline: "Offline",
        synced: "Synced",
        localOnly: "Local only",
        logout: "Logout",
        guestMode: "Guest mode",
        signIn: "Sign in",
        welcomeBack: "Welcome back",
        loggedOut: "Successfully logged out",
        progressSynced: "Progress synced to cloud",
        progressLocal: "Offline - progress saved locally"
    }
};

// Language Manager Class
class LanguageManager {
    constructor() {
        this.currentLanguage = this.loadLanguage();
        this.translations = translations;
    }

    loadLanguage() {
        const saved = localStorage.getItem('hsk-language');
        return saved || 'es'; // Default to Spanish
    }

    saveLanguage() {
        localStorage.setItem('hsk-language', this.currentLanguage);
    }

    setLanguage(lang) {
        this.currentLanguage = lang;
        this.saveLanguage();
        this.updateInterface();
    }

    t(key, replacements = {}) {
        let text = this.translations[this.currentLanguage]?.[key] ||
            this.translations['es'][key] ||
            key;

        // Replace placeholders like {count}
        Object.keys(replacements).forEach(placeholder => {
            text = text.replace(`{${placeholder}}`, replacements[placeholder]);
        });

        return text;
    }

    getText(key, replacements = {}) {
        return this.t(key, replacements);
    }

    updateInterface() {
        // Use requestAnimationFrame for better performance
        requestAnimationFrame(() => {
            // Batch DOM updates
            const updates = [];

            // Collect all elements to update
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const text = this.t(key);
                updates.push({ element, text, type: 'content' });
            });

            document.querySelectorAll('[data-i18n-title]').forEach(element => {
                const key = element.getAttribute('data-i18n-title');
                const text = this.t(key);
                updates.push({ element, text, type: 'title' });
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                const text = this.t(key);
                updates.push({ element, text, type: 'placeholder' });
            });

            // Apply all updates at once
            updates.forEach(({ element, text, type }) => {
                if (type === 'content') {
                    if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'search')) {
                        element.placeholder = text;
                    } else {
                        element.textContent = text;
                    }
                } else if (type === 'title') {
                    element.title = text;
                } else if (type === 'placeholder') {
                    element.placeholder = text;
                }
            });

            // Update language selector
            const languageSelect = document.getElementById('language-select');
            if (languageSelect) {
                languageSelect.value = this.currentLanguage;
            }

            // Update document language attribute
            document.documentElement.lang = this.currentLanguage;

            // Trigger custom event for components that need manual update
            window.dispatchEvent(new CustomEvent('languageChanged', {
                detail: { language: this.currentLanguage }
            }));
        });
    }
}

// Export for use in main app
window.LanguageManager = LanguageManager;
window.translations = translations;
